/* =====================================================================
   Intranet Vinted — style.css (cleaned & organized)
   Manté l’estètica actual 1:1. Dreceres de cerca:
   [TOKENS] [BASE] [HEADER] [SUMMARY] [BUTTONS] [INPUTS]
   [LAYOUT] [CARDS] [KPIS] [CHIPS] [CHIPS:progress]
   [TABLE] [TABLE:sticky] [TABLE:zebra] [INLINE-EDITOR]
   [MODAL] [SNACKBAR] [SCROLLBAR] [MOBILE]
   ===================================================================== */

/* ============================= [TOKENS] ============================== */
:root{
  --bg:#0f1220; --card:#161a2a; --muted:#8a90a6; --text:#e8ecff;
  --accent:#7c9cff; --ok:#23c55e; --bad:#ef4444; --warn:#f59e0b;
  --line:#252a40; --chip:#232842; --chip-2:#1e243d; --radius:14px;
}
body[data-theme="light"]{
  --bg:#f6f7fb; --card:#ffffff; --muted:#6b7280; --text:#0f172a;
  --accent:#3b82f6; --ok:#16a34a; --bad:#dc2626; --warn:#d97706;
  --line:#e5e7eb; --chip:#f1f5f9; --chip-2:#e2e8f0;
}

/* =============================== [BASE] ============================== */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg); color:var(--text);
}
.small{ font-size:.86rem } .muted{ color:var(--muted) } .mono{ font-variant-numeric:tabular-nums }

/* ============================= [HEADER] ============================== */
.app-header{
  position:sticky; top:0; z-index:20;
  backdrop-filter: blur(8px);
  background:color-mix(in oklab, var(--bg) 75%, transparent);
  border-bottom:1px solid var(--line);
}
.wrap{ max-width:1100px; margin:0 auto; padding:16px 24px }
.row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
.row > *{ flex:1 }
.brand{ display:flex; align-items:center; gap:10px; font-weight:700 }
.brand .dot{
  width:10px;height:10px;border-radius:50%; background:var(--accent);
  box-shadow:0 0 0 6px color-mix(in oklab, var(--accent) 30%, transparent)
}

/* ============================= [SUMMARY] ============================= */
.summary{ display:flex; align-items:center; gap:10px; justify-content:flex-end }
.summary .label{
  font-weight:800; letter-spacing:.3px; text-transform:uppercase;
  padding:4px 8px; border-radius:999px; border:1px solid var(--line)
}
.summary .label.profit{
  background:color-mix(in oklab, var(--ok) 18%, transparent);
  color:color-mix(in oklab, var(--ok) 90%, white);
  border-color:color-mix(in oklab, var(--ok) 35%, transparent)
}
.summary .label.loss{
  background:color-mix(in oklab, var(--bad) 15%, transparent);
  color:color-mix(in oklab, var(--bad) 90%, white);
  border-color:color-mix(in oklab, var(--bad) 35%, transparent)
}
.summary .amount{ font-size:1.2rem; font-weight:800 }

/* ============================= [BUTTONS] ============================= */
.btn{ background:var(--accent); color:white; border:none; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer }
.btn.ghost{ background:transparent; color:inherit; border:1px solid var(--line) }
.btn.bad{ background:var(--bad); color:white }
.btn.tiny{ padding:6px 8px; border-radius:10px }
.btn.icon{ width:34px; height:34px; padding:0; display:inline-flex; align-items:center; justify-content:center; border-radius:999px }

/* micro-animacions coherents */
.btn, .chip, .pill, .name-link{
  transition: background .18s ease, color .18s ease, border-color .18s ease, transform .1s ease;
}
.chip:hover{ transform: translateY(-1px); }
.btn:active, .chip:active{ transform: translateY(0); }
@media (prefers-reduced-motion: reduce){ *{ transition:none!important; animation:none!important } }

/* =============================== [INPUTS] ============================ */
.select, .input{
  width:100%; background:var(--chip); border:1px solid var(--line);
  color:var(--text); padding:8px 10px; border-radius:10px
}

/* =============================== [LAYOUT] ============================ */
.section-title{ margin:0 0 6px 0 }
.card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:12px; overflow:visible }
.card.compact{ padding:10px }
.wrap > .card{ margin:14px 0 0 } .wrap > .card:first-of-type{ margin-top:0 }

/* ================================ [KPIS] ============================ */
.kpis{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:10px }
.small-grid{ grid-template-columns:repeat(4,minmax(0,1fr)) }
@media (max-width:900px){ .kpis,.small-grid{ grid-template-columns:repeat(2,1fr) } }
@media (max-width:520px){ .kpis,.small-grid{ grid-template-columns:1fr } }
.kpi h4{ margin:0 0 4px 0; color:var(--muted); font-weight:600; font-size:.88rem }
.kpi div{ font-size:1.1rem; font-weight:700 }

/* benefici/pèrdua a la capçalera del paquet */
.pkg-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:6px }
.pkg-profit{ display:flex; align-items:center; gap:10px }
.pkg-profit .badge{
  padding:2px 10px; border-radius:999px; font-weight:600; font-size:.85rem;
  border:1px solid var(--line); background:var(--card)
}
.pkg-profit .badge.profit{ color:var(--ok) }
.pkg-profit .badge.loss{ color:var(--bad) }
.pkg-profit .amount{ font-variant-numeric:tabular-nums }
@media (max-width:560px){ .pkg-header{ flex-direction:column; align-items:flex-start; gap:6px } }

/* ================================ [CHIPS] ============================ */
.pkgbar{ align-items:center }
.actions{ display:flex; gap:6px; justify-content:flex-end; flex-wrap:nowrap }
.chips{ display:flex; gap:8px; flex-wrap:wrap }
.chip{
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
  background:var(--chip); border:1px solid var(--line); border-radius:999px;
  cursor:pointer; user-select:none; color:var(--text)
}
.chip:hover{ background:var(--chip-2) }
.chip.active{ outline:2px solid color-mix(in oklab, var(--accent) 65%, transparent) }
.chip.add{ background:transparent; border-style:dashed }

/* =========================== [CHIPS:progress] ======================== */
/* xip-barra amb farcit progressiu + valors alternables (potencial / %) */
.chip.pb{ position:relative; overflow:hidden; display:inline-flex; align-items:center; gap:8px; padding:6px 10px }
.chip.pb .fill{
  position:absolute; inset:0; width:var(--pct,0%); border-radius:999px;
  transition: width .24s ease; pointer-events:none;
}
.chip.pb .txt{ position:relative; display:inline-flex; align-items:center; gap:8px; white-space:nowrap }
.chip.pb .pkg-name{ font-weight:700 }
.chip.pb .pct, .chip.pb .value{ font-size:.78rem; font-variant-numeric:tabular-nums; opacity:.9 }
.chip.pb .dot{ width:8px; height:8px; border-radius:50%; background:var(--ok); opacity:.85 }
.chip.pb .dot.neg{ background:var(--bad) }

/* bandes de color segons progrés */
.chip.pb.low  .fill{ background:color-mix(in oklab, var(--bad) 80%, transparent);  opacity:.22 }
.chip.pb.mid  .fill{ background:color-mix(in oklab, var(--warn) 85%, transparent); opacity:.25 }
.chip.pb.win  .fill{ background:color-mix(in oklab, var(--ok) 85%, transparent);   opacity:.32 }
.chip.pb.low  .value{ color:color-mix(in oklab, var(--ok) 70%, var(--text)) }
.chip.pb.mid  .value{ color:color-mix(in oklab, var(--ok) 65%, var(--text)) }
.chip.pb.win  .value{ color:color-mix(in oklab, var(--ok) 65%, var(--text)) }

/* ================================ [TABLE] ============================ */
.head-left{ display:flex; align-items:center; gap:10px }
#table{ width:100%; border-collapse:separate; border-spacing:0 6px }
#table thead th{ color:var(--muted); font-weight:600; text-align:left; font-size:.86rem; cursor:pointer }
#table.compact-table tbody td, #table.compact-table thead th{ padding:8px 8px }
#table tbody tr{ background:var(--card); border:1px solid var(--line); transition:transform .16s ease, box-shadow .16s ease, background .16s ease }
#table tbody tr:hover{ transform:translateY(-1px); box-shadow:0 4px 14px rgba(0,0,0,.18) }
#table tbody tr td:first-child{ border-top-left-radius:10px; border-bottom-left-radius:10px }
#table tbody tr td:last-child{  border-top-right-radius:10px; border-bottom-right-radius:10px }
#table tbody tr.sold{
  background:color-mix(in oklab, var(--ok) 10%, var(--card));
  border-color:color-mix(in oklab, var(--ok) 30%, var(--line))
}
.right{ text-align:right }
.editable{ cursor:text }
.pill{
  display:inline-flex; align-items:center; gap:6px; padding:4px 8px;
  border-radius:999px; font-size:.8rem; border:1px solid var(--line);
  background:var(--chip); cursor:pointer
}
.pill.ok{ background:color-mix(in oklab, var(--ok) 12%, transparent); border-color:color-mix(in oklab, var(--ok) 30%, transparent) }
.name-link{ color:inherit; text-decoration:none; font-weight:600 }
.name-link:hover{ text-decoration:underline }

/* --------------------------- [TABLE:sticky] -------------------------- */
.card .table-wrap{
  position: relative;
  max-height: min(68vh, 720px);
  overflow: auto;
  overscroll-behavior: auto;
  -webkit-overflow-scrolling: touch; /* inèrcia i handoff suau a iOS */
}
.card .table-wrap table{ border-collapse:separate; border-spacing:0; width:100% }
.card .table-wrap thead th{
  position:sticky; top:0; z-index:3;
  background:var(--card);
  box-shadow:0 1px 0 var(--line) inset, 0 1px 0 rgba(0,0,0,.04)
}

/* --------------------------- [TABLE:zebra] --------------------------- */
#table tbody tr:not(.sold):nth-child(odd){
  background:color-mix(in oklab, var(--chip-2) 55%, var(--card));
}

/* =========================== [INLINE-EDITOR] ========================= */
/* overlay del mateix tamany (sense moure files) */
#table td.editable{ position:relative }
.cell-editor{
  position:absolute; inset:0; display:flex; align-items:center;
  background:transparent; border:0; padding:0; box-sizing:border-box
}
.cell-editor input{
  width:100%; height:100%; margin:0; padding:0; border:0; outline:none;
  background:transparent; color:var(--text); font:inherit;
  text-align:inherit; line-height:inherit
}
#table td.editing .cell-editor{
  outline:1px dashed var(--line); outline-offset:-1px; border-radius:8px
}
#table td.right .cell-editor input{ text-align:right }
.cell-editor input[type="number"]::-webkit-outer-spin-button,
.cell-editor input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }

/* ================================= [MODAL] ========================== */
dialog{ border:none; padding:0; border-radius:14px; max-width:560px; width:100% }
dialog::backdrop{ background:rgba(0,0,0,.55) }
dialog .modal{ background:var(--card); border:1px solid var(--line); padding:14px; border-radius:14px; color:var(--text) }
dialog .modal h3{ color:var(--text) }
dialog .modal .btn.ghost{ color:var(--text) }
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
@media (max-width:520px){ .grid{ grid-template-columns:1fr } }

/* ======= inputs de paquet: una mica d’espai al damunt del number ===== */
#pkgDiscount, #pkgShipping{ margin-top:6px }

/* ============================== [SNACKBAR] =========================== */
.snackbar{
  position:fixed; right:16px; bottom:16px; z-index:50;
  background:var(--card); color:var(--text); border:1px solid var(--line);
  border-radius:12px; padding:10px 12px; display:flex; gap:12px; align-items:center;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  transform:translateY(12px); opacity:0; pointer-events:none;
  transition:opacity .18s ease, transform .18s ease;
}
.snackbar.show{ opacity:1; transform:translateY(0); pointer-events:auto }
.snackbar .msg{ font-size:.92rem }
.snackbar .undo{
  background:transparent; border:1px solid var(--line);
  color:var(--text); border-radius:8px; padding:6px 10px; cursor:pointer
}
@media (max-width:560px){
  .snackbar{ left:50%; right:auto; transform:translate(-50%,12px) }
  .snackbar.show{ transform:translate(-50%,0) }
}

/* ============================ [SCROLLBAR] ============================ */
/* amagar scrollbar global del body */
html{ scrollbar-width:none }
html::-webkit-scrollbar{ width:0; height:0; display:none }

/* scrollbar ultra discret només a la taula */
.card .table-wrap{ scrollbar-width:thin; scrollbar-color:color-mix(in oklab, var(--text) 22%, transparent) transparent }
.card .table-wrap::-webkit-scrollbar{ width:8px; height:8px }
.card .table-wrap::-webkit-scrollbar-track{ background:transparent }
.card .table-wrap::-webkit-scrollbar-thumb{
  background:transparent; border-radius:8px; border:2px solid transparent
}
.card .table-wrap:hover::-webkit-scrollbar-thumb{
  background:color-mix(in oklab, var(--text) 28%, transparent)
}
/* Vel suau al fons com a pista de scroll */
.card .table-wrap::after{
  content:""; position:sticky; display:block; bottom:0; height:18px;
  background:linear-gradient(to bottom, transparent, color-mix(in oklab, var(--card) 96%, transparent));
  pointer-events:none; z-index:1;
}

/* =============================== [MOBILE] ============================ */
/* capçalera “només logo” i resum total centrat (mòbil) */
@media (max-width:560px){
  .app-header .wrap{
    position:relative; height:56px; padding:8px 12px; display:block;
  }
  .app-header .brand{
    position:absolute; left:12px; top:50%; transform:translateY(-50%);
    display:inline-flex; align-items:center; gap:8px;
  }
  .app-header .brand .brand-title{ display:none } /* amaga el text */
  .app-header .brand .dot{
    width:14px; height:14px; border-radius:50%; background:var(--accent); display:inline-block;
  }
  #summaryBox.summary{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    margin:0; display:inline-flex; align-items:center; justify-content:center; white-space:nowrap;
  }
}