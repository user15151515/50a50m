/* =====================================================================
   Intranet Vinted — style.css (cleaned & organized)
   Manté l’estètica actual 1:1. Dreceres de cerca:
   [TOKENS] [BASE] [HEADER] [SUMMARY] [BUTTONS] [INPUTS]
   [LAYOUT] [CARDS] [KPIS] [CHIPS] [CHIPS:progress]
   [TABLE] [TABLE:sticky] [TABLE:zebra] [INLINE-EDITOR]
   [MODAL] [SNACKBAR] [SCROLLBAR] [MOBILE]
   ===================================================================== */

/* ============================= [TOKENS] ============================== */
:root{
  --bg:#0f1220; --card:#161a2a; --muted:#8a90a6; --text:#e8ecff;
  --accent:#7c9cff; --ok:#23c55e; --bad:#ef4444; --warn:#f59e0b;
  --line:#252a40; --chip:#232842; --chip-2:#1e243d; --radius:14px;
}
body[data-theme="light"]{
  --bg:#f6f7fb; --card:#ffffff; --muted:#6b7280; --text:#0f172a;
  --accent:#3b82f6; --ok:#16a34a; --bad:#dc2626; --warn:#d97706;
  --line:#e5e7eb; --chip:#f1f5f9; --chip-2:#e2e8f0;
}

/* =============================== [BASE] ============================== */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg); color:var(--text);
}
.small{ font-size:.86rem } .muted{ color:var(--muted) } .mono{ font-variant-numeric:tabular-nums }

/* ============================= [HEADER] ============================== */
.app-header{
  position:sticky; top:0; z-index:20;
  backdrop-filter: blur(8px);
  background:color-mix(in oklab, var(--bg) 75%, transparent);
  border-bottom:1px solid var(--line);
}
.wrap{ max-width:1100px; margin:0 auto; padding:16px 24px }
.row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
.row > *{ flex:1 }
.brand{ display:flex; align-items:center; gap:10px; font-weight:700 }
.brand .dot{
  width:10px;height:10px;border-radius:50%; background:var(--accent);
  box-shadow:0 0 0 6px color-mix(in oklab, var(--accent) 30%, transparent)
}

/* ============================= [SUMMARY] ============================= */
.summary{ display:flex; align-items:center; gap:10px; justify-content:flex-end }
.summary .label{
  font-weight:800; letter-spacing:.3px; text-transform:uppercase;
  padding:4px 8px; border-radius:999px; border:1px solid var(--line)
}
.summary .label.profit{
  background:color-mix(in oklab, var(--ok) 18%, transparent);
  color:color-mix(in oklab, var(--ok) 90%, white);
  border-color:color-mix(in oklab, var(--ok) 35%, transparent)
}
.summary .label.loss{
  background:color-mix(in oklab, var(--bad) 15%, transparent);
  color:color-mix(in oklab, var(--bad) 90%, white);
  border-color:color-mix(in oklab, var(--bad) 35%, transparent)
}
.summary .amount{ font-size:1.2rem; font-weight:800 }

/* ============================= [BUTTONS] ============================= */
.btn{ background:var(--accent); color:white; border:none; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer }
.btn.ghost{ background:transparent; color:inherit; border:1px solid var(--line) }
.btn.bad{ background:var(--bad); color:white }
.btn.tiny{ padding:6px 8px; border-radius:10px }
.btn.icon{ width:34px; height:34px; padding:0; display:inline-flex; align-items:center; justify-content:center; border-radius:999px }

.chip:hover{ transform: translateY(-1px); }
.btn:active, .chip:active{ transform: translateY(0); }
@media (prefers-reduced-motion: reduce){ *{ transition:none!important; animation:none!important } }

/* =============================== [INPUTS] ============================ */
.select, .input{
  width:100%; background:var(--chip); border:1px solid var(--line);
  color:var(--text); padding:8px 10px; border-radius:10px
}

/* =============================== [LAYOUT] ============================ */
.section-title{ margin:0 0 6px 0 }
.card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:12px; overflow:visible; margin: 10px; }
.card.compact{ padding:10px }
.wrap > .card{ margin:14px 0 0 } .wrap > .card:first-of-type{ margin-top:0 }

/* ================================ [KPIS] ============================ */
.kpis{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:10px }
.small-grid{ grid-template-columns:repeat(4,minmax(0,1fr)) }
@media (max-width:900px){ .kpis,.small-grid{ grid-template-columns:repeat(2,1fr) } }
@media (max-width:520px){ .kpis,.small-grid{ grid-template-columns:1fr } }
.kpi h4{ margin:0 0 4px 0; color:var(--muted); font-weight:600; font-size:.88rem }
.kpi div{ font-size:1.1rem; font-weight:700 }

/* benefici/pèrdua a la capçalera del paquet — proposta “chip amb indicador” */
/* benefici/pèrdua a la capçalera del paquet — CHIP amb només número */
.pkg-header{
  display:flex;
  flex-direction: row;  /* número sota el títol (com vols ara) */
  align-items:flex-start;
  gap:10px;
  margin-bottom:6px;
}
@media (max-width:560px){
  .pkg-header{ gap:6px }
}

/* El chip només conté el número; es pinta segons .profit/.loss */
.pkg-profit{
  display:inline-flex; align-items:center;
  padding:4px 10px;
  border-radius:999px;
  line-height:1;
  border:1px solid var(--line);
  background: color-mix(in oklab, var(--card) 92%, transparent);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}

/* Color de text i lleu “tint” de fons segons signe */
.pkg-profit.profit{
  color: var(--ok);
  background: color-mix(in oklab, var(--ok) 14%, var(--card));
  border-color: color-mix(in oklab, var(--ok) 30%, var(--line));
}
.pkg-profit.loss{
  color: var(--bad);
  background: color-mix(in oklab, var(--bad) 12%, var(--card));
  border-color: color-mix(in oklab, var(--bad) 28%, var(--line));
}

/* Número: lleugerament destacat però equilibrat */
.pkg-profit .amount{
  font-variant-numeric: tabular-nums;
  font-size: .98rem;
  font-weight: 800;
  letter-spacing: .1px;
}

/* Animació en canviar valor */
@keyframes bump {
  0% { transform: translateZ(0) scale(1); }
  40% { transform: translateZ(0) scale(1.04); }
  100% { transform: translateZ(0) scale(1); }
}
.pkg-profit.bump .amount{ animation: bump .28s ease; }





/* [KPIS:toggle] — fa evident que “Ingressos previstos” es pot clicar */
.kpi.toggle{ cursor:pointer }
.kpi.toggle h4{ text-decoration: underline dotted transparent; transition: text-decoration-color .18s ease }
.kpi.toggle:hover h4{ text-decoration-color: currentColor }

/* ================================ [CHIPS] ============================ */
.pkgbar{ align-items:center }
.actions{ display:flex; gap:6px; justify-content:flex-end; flex-wrap:nowrap }
.chips{ display:flex; gap:8px; flex-wrap:wrap }
.chip{
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
  background:var(--chip); border:1px solid var(--line); border-radius:999px;
  cursor:pointer; user-select:none; color:var(--text)
}
.chip:hover{ background:var(--chip-2) }
.chip.active{ outline:2px solid color-mix(in oklab, var(--accent) 65%, transparent) }
.chip.add{ background:transparent; border-style:dashed }

/* =========================== [CHIPS:progress] ======================== */
/* xip-barra amb farcit progressiu (sense números) i dos estats: loss/win */
.chip.pb{
  position:relative; overflow:hidden; display:inline-flex; align-items:center;
  gap:8px; padding:6px 10px;
}
.chip.pb .fill{
  position:absolute; inset:0; width:var(--pct,0%); border-radius:999px;
  transition: width .24s ease; pointer-events:none;
}
.chip.pb .txt{ position:relative; display:inline-flex; align-items:center; gap:8px; white-space:nowrap }
.chip.pb .pkg-name{ font-weight:700 }

/* colors de la barra segons si s’ha recuperat la inversió (win) o no (loss) */
.chip.pb.loss .fill{
  background: color-mix(in oklab, var(--bad) 85%, transparent);
  opacity:.28;
}
.chip.pb.win .fill{
  background: color-mix(in oklab, var(--ok) 85%, transparent);
  opacity:.32;
}

/* ================================ [TABLE] ============================ */
.head-left{ display:flex; align-items:center; gap:10px }
#table{ width:100%; border-collapse:separate; border-spacing:0 6px }
#table thead th{ color:var(--muted); font-weight:600; text-align:left; font-size:.86rem; cursor:pointer }
#table.compact-table tbody td, #table.compact-table thead th{ padding:8px 8px }
#table tbody tr{ background:var(--card); border:1px solid var(--line); transition:transform .16s ease, box-shadow .16s ease, background .16s ease }
#table tbody tr td:first-child{ border-top-left-radius:10px; border-bottom-left-radius:10px }
#table tbody tr td:last-child{  border-top-right-radius:10px; border-bottom-right-radius:10px }
#table tbody tr.sold{
  background:color-mix(in oklab, var(--ok) 10%, var(--card));
  border-color:color-mix(in oklab, var(--ok) 30%, var(--line))
}

/* Zebra suau també per a files venudes */
#table tbody tr.sold:nth-child(even){
  background: color-mix(in oklab, var(--ok) 10%, var(--card));
}
#table tbody tr.sold:nth-child(odd){
  background: color-mix(in oklab, var(--ok) 20%, var(--card));
}

.right{ text-align:right }
.editable{ cursor:text }
.pill{
  display:inline-flex; align-items:center; gap:6px; padding:4px 8px;
  border-radius:999px; font-size:.8rem; border:1px solid var(--line);
  background:var(--chip); cursor:pointer
}
.pill.ok{ background:color-mix(in oklab, var(--ok) 12%, transparent); border-color:color-mix(in oklab, var(--ok) 30%, transparent) }
.name-link{ color:inherit; text-decoration:none; font-weight:600 }
.name-link:hover{ text-decoration:underline }

/* --------------------------- [TABLE:sticky] -------------------------- */
.card .table-wrap{
  position: relative;
  max-height: min(68vh, 720px);
  overflow: auto;
  overscroll-behavior: auto;
  -webkit-overflow-scrolling: touch; /* inèrcia i handoff suau a iOS */
}
.card .table-wrap table{ border-collapse:separate; border-spacing:0; width:100% }
.card .table-wrap thead th{
  position:sticky; top:0; z-index:3;
  background:var(--card);
  box-shadow:0 1px 0 var(--line) inset, 0 1px 0 rgba(0,0,0,.04)
}

/* --------------------------- [TABLE:zebra] --------------------------- */
#table tbody tr:not(.sold):nth-child(odd){
  background:color-mix(in oklab, var(--chip-2) 55%, var(--card));
}

/* =========================== [INLINE-EDITOR] ========================= */
/* overlay del mateix tamany (sense moure files) */
#table td.editable{ position:relative }
.cell-editor{
  position:absolute; inset:0; display:flex; align-items:center;
  background:transparent; border:0; padding:0; box-sizing:border-box
}
.cell-editor input{
  width:100%; height:100%; margin:0; padding:0; border:0; outline:none;
  background:transparent; color:var(--text); font:inherit;
  text-align:inherit; line-height:inherit
}
#table td.editing .cell-editor{
  outline:1px dashed var(--line); outline-offset:-1px; border-radius:8px
}
#table td.right .cell-editor input{ text-align:right }
.cell-editor input[type="number"]::-webkit-outer-spin-button,
.cell-editor input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }

/* ================================= [MODAL] ========================== */
dialog{ border:none; padding:0; border-radius:14px; max-width:560px; width:100% }
dialog::backdrop{ background:rgba(0,0,0,.55) }
dialog .modal{ background:var(--card); border:1px solid var(--line); padding:14px; border-radius:14px; color:var(--text) }
dialog .modal h3{ color:var(--text) }
dialog .modal .btn.ghost{ color:var(--text) }
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
@media (max-width:520px){ .grid{ grid-template-columns:1fr } }

/* ======= inputs de paquet: una mica d’espai al damunt del number ===== */
#pkgDiscount, #pkgShipping{ margin-top:6px }

/* ============================== [SNACKBAR] =========================== */
.snackbar{
  position:fixed; right:16px; bottom:16px; z-index:50;
  background:var(--card); color:var(--text); border:1px solid var(--line);
  border-radius:12px; padding:10px 12px; display:flex; gap:12px; align-items:center;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  transform:translateY(12px); opacity:0; pointer-events:none;
  transition:opacity .18s ease, transform .18s ease;
}
.snackbar.show{ opacity:1; transform:translateY(0); pointer-events:auto }
.snackbar .msg{ font-size:.92rem }
.snackbar .undo{
  background:transparent; border:1px solid var(--line);
  color:var(--text); border-radius:8px; padding:6px 10px; cursor:pointer
}
@media (max-width:560px){
  .snackbar{ left:50%; right:auto; transform:translate(-50%,12px) }
  .snackbar.show{ transform:translate(-50%,0) }
}

/* ============================ [SCROLLBAR] ============================ */
/* amagar scrollbar global del body */
html{ scrollbar-width:none }
html::-webkit-scrollbar{ width:0; height:0; display:none }

/* scrollbar ultra discret només a la taula */
.card .table-wrap{ scrollbar-width:thin; scrollbar-color:color-mix(in oklab, var(--text) 22%, transparent) transparent }
.card .table-wrap::-webkit-scrollbar{ width:8px; height:8px }
.card .table-wrap::-webkit-scrollbar-track{ background:transparent }
.card .table-wrap::-webkit-scrollbar-thumb{
  background:transparent; border-radius:8px; border:2px solid transparent
}
.card .table-wrap:hover::-webkit-scrollbar-thumb{
  background:color-mix(in oklab, var(--text) 28%, transparent)
}
/* Vel suau al fons com a pista de scroll */
.card .table-wrap::after{
  content:""; position:sticky; display:block; bottom:0; height:18px;
  background:linear-gradient(to bottom, transparent, color-mix(in oklab, var(--card) 96%, transparent));
  pointer-events:none; z-index:1;
}


/* ========================= [BUTTONS:add-product] ========================= */
/* [TABLE:head actions] */
.head-row{ display:flex; align-items:center; justify-content:space-between }

/* [BUTTONS:add-product — versió fina] */
.btn.add-product{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px; font-weight:700; font-size:.9rem;
  background:transparent; color:var(--text);
  border:1px solid color-mix(in oklab, var(--text) 20%, transparent);
  box-shadow:none;
  margin-bottom: 10px;
}
.btn.add-product .plus{ font-size:.95rem; line-height:1; opacity:.9 }
.btn.add-product:hover{
  background: color-mix(in oklab, var(--text) 8%, transparent);
}
.btn.add-product:active{
  transform: translateY(0);
}


/* ====================== [BULK PRICING] marge global ====================== */
.bulk-row{ align-items:flex-end; gap:12px }
.bulk-inline{ display:flex; gap:8px; align-items:center }
.col-bulk{ min-width:280px; flex:2 }
@media (max-width:700px){
  .col-bulk{ min-width:unset; flex:1 }
  .bulk-inline{ gap:6px }
}

/* =============================== [PER ORDENAR] ============================ */

/* [FORMS:number sans spinners] */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }
input[type="number"]{ -moz-appearance:textfield; appearance:textfield }


/* =============================== [MOBILE] ============================ */
/* capçalera “només logo” i resum total centrat (mòbil) */
@media (max-width:560px){
  .app-header .wrap{
    position:relative; height:56px; padding:8px 12px; display:block;
  }
  .app-header .brand{
    position:absolute; left:12px; top:50%; transform:translateY(-50%);
    display:inline-flex; align-items:center; gap:8px;
  }
  .app-header .brand .brand-title{ display:none } /* amaga el text */
  .app-header .brand .dot{
    width:14px; height:14px; border-radius:50%; background:var(--accent); display:inline-block;
  }
  #summaryBox.summary{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    margin:0; display:inline-flex; align-items:center; justify-content:center; white-space:nowrap;
  }
}



/* ========================= [UTILITY] ============================ */
.hidden{ display:none !important; }

/* ============================== [KPIS+:color] =================== */
.kpis .kpi{
  position: relative;
  padding:12px;
  border-radius:12px;
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--kpi, var(--accent)) 12%, transparent), transparent);
  border:1px solid var(--line);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.093);
}
.kpis .kpi::before{
  content:"";
  position:absolute; left:10px; right:10px; top:8px; height:3px;
  border-radius:999px; background:var(--kpi, var(--accent)); opacity:.75;
}
.kpis .kpi h4{
  margin-top:6px;
  color: color-mix(in oklab, var(--kpi, var(--accent)) 70%, var(--muted));
  font-weight:700;
  letter-spacing:.2px;
}
.kpis .kpi div{ font-size:1.2rem; font-weight:800 }
.kpis .kpi[data-variant="accent"]{ --kpi: var(--accent) }
.kpis .kpi[data-variant="ok"]{ --kpi: var(--ok) }
.kpis .kpi[data-variant="warn"]{ --kpi: var(--warn) }
.kpis .kpi[data-variant="bad"]{ --kpi: var(--bad) }

/* Hover micro-lift */
.kpis .kpi{ transition: transform .16s ease, box-shadow .16s ease }
.kpis .kpi:hover{ transform: translateY(-2px); box-shadow:0 2px 4px rgba(0, 0, 0, 0.094) }
/* KPIs estil únic (sense multicolor) */
#statsView .kpis .kpi{ --kpi: var(--accent) !important; }
#statsView .kpis .kpi h4{color: color-mix(in oklab, var(--accent) 70%, var(--muted));}

/* ============================== [DRAWER] ======================== */
.drawer{ position:fixed; inset:0; z-index:60; pointer-events:none }
.drawer .backdrop{
  position:absolute; inset:0; background:rgba(0,0,0,.45); opacity:0;
  transition: opacity .18s ease;
}
.drawer .panel{
  position:absolute; top:0; bottom:0; left:0; width:280px;
  background:var(--card); border-right:1px solid var(--line);
  transform:translateX(-100%); transition: transform .22s ease;
  padding:14px;
}
.drawer.show{ pointer-events:auto }
.drawer.show .backdrop{ opacity:1 }
.drawer.show .panel{ transform:translateX(0) }

.drawer .nav{ display:flex; flex-direction:column; gap:6px; margin-top:8px }
.drawer .nav a{
  display:flex; align-items:center; gap:10px; padding:10px 12px;
  color:var(--text); text-decoration:none; border-radius:10px;
  border:1px solid transparent;

}
.drawer .nav a:hover{ background:var(--chip) }
.drawer .nav a.active{ background:var(--chip); border-color:var(--line) }

